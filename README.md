# 江西青年共青团过后台，批量完成

 **如需要帮忙挂到服务器运行的也可以联系我，目前有一台小型服务器，每周自动运行**

要求：**提供你的 openid 和团委，姓名班级即可**

openid 获取: 见下面抓包文章


## 关于失效声明
目前的话从第十二季第四期（2021.10-18）起，该批量脚本不起效果
发送请求过后会返回如下的json

```python
{'status': 408, 'message': '请先关注', 'result': None, 'debug': None}
```
批量脚本旧代码存放在 ： 批量脚本(已失效) 目录当中

### 原因

之前是随机生成的一个openid,这个openid是一个代表着用户的标识，之前是生成了openid就直接可以发送请求，现在是这个openid标识
的这个用户必须关注过江西共青团，所以随机生成的openid就不起效果了

### 解决办法
通过抓包获取到您自己的openid，然后根据脚本内容稍加修改即可，后续我会将修改的推送到github
所以目前不能批量了
关于抓包:请阅读这篇文章

[青年大学习抓包](https://hellomango.gitee.io/mangoblog/2021/09/26/other/%E9%9D%92%E5%B9%B4%E5%A4%A7%E5%AD%A6%E4%B9%A0%E6%8A%93%E5%8C%85/)


## main.py

无需更改，只需要配置好qn_names.txt就可以

qn_names.txt格式如下

班级+空格+姓名+团委id+openid，如：

```
XXX班 张三 12345 openid
```

可多行批量，如：

```
XXX班 张三 12345 opoenid
XXX班 张四 123456 openid
XXX班 张五 1234567 openid
```



1. **每个人的数据用空格隔开，一个人的信息一行**

2. 如果团委是四级团委组织，那么班级填四级就好，如:

   ```
   4级 张三 12345 openid
   ```

   

## 如何获取团委id

utils.py内有一个Util类，其中有一个pring_org()静态方法，运行即可获取

运行效果如下:

```
找到以下团委列表:
1、团委id:N0002	团委名字: 南昌市
2、团委id:N0003	团委名字: 九江市
3、团委id:N0004	团委名字: 景德镇市
4、团委id:N0005	团委名字: 萍乡市
5、团委id:N0006	团委名字: 新余市
6、团委id:N0007	团委名字: 鹰潭市
7、团委id:N0008	团委名字: 赣州市
8、团委id:N0009	团委名字: 宜春市
9、团委id:N0010	团委名字: 上饶市
10、团委id:N0011	团委名字: 吉安市
11、团委id:N0012	团委名字: 抚州市
12、团委id:N0013	团委名字: 省属本科院校团委
13、团委id:N0014	团委名字: 非省属本科院校团委
14、团委id:N0015	团委名字: 高职专科院校团委
15、团委id:N0016	团委名字: 省直属单位团委
请选择以下第几个团委(输入 1、2、3 等数字):
```

会一直递归一下去，直到你找到自己所在团委id,并且会提示你团委是几级，一下是完整示例

```
找到以下团委列表:
1、团委id:N0002	团委名字: 南昌市
2、团委id:N0003	团委名字: 九江市
3、团委id:N0004	团委名字: 景德镇市
4、团委id:N0005	团委名字: 萍乡市
5、团委id:N0006	团委名字: 新余市
6、团委id:N0007	团委名字: 鹰潭市
7、团委id:N0008	团委名字: 赣州市
8、团委id:N0009	团委名字: 宜春市
9、团委id:N0010	团委名字: 上饶市
10、团委id:N0011	团委名字: 吉安市
11、团委id:N0012	团委名字: 抚州市
12、团委id:N0013	团委名字: 省属本科院校团委
13、团委id:N0014	团委名字: 非省属本科院校团委
14、团委id:N0015	团委名字: 高职专科院校团委
15、团委id:N0016	团委名字: 省直属单位团委
请选择以下第几个团委(输入 1、2、3 等数字):1
{'id': 'N0002', 'title': '南昌市', 'type': '', 'pid': 'N', 'image': None, 'level': '1', 'memberCnt': '88275', 'aid': '529891B3-D535-40E3-A003-ABF53EC37C9C', 'account': 'nctsw', 'password': '83885819'}
找到以下团委列表:
1、团委id:N00020001	团委名字: 南昌县
2、团委id:N00020002	团委名字: 进贤县
3、团委id:N00020003	团委名字: 安义县
4、团委id:N00020004	团委名字: 东湖区
5、团委id:N00020005	团委名字: 西湖区
6、团委id:N00020006	团委名字: 青云谱区
7、团委id:N00020007	团委名字: 湾里管理局
8、团委id:N00020008	团委名字: 青山湖区
9、团委id:N00020009	团委名字: 新建区
10、团委id:N00020010	团委名字: 高新区
11、团委id:N00020011	团委名字: 经开区
12、团委id:N00020012	团委名字: 红谷滩区
13、团委id:N00020013	团委名字: 南昌市市教育局团委
14、团委id:N00020014	团委名字: 市建委团委
15、团委id:N00020015	团委名字: 市政公用集团团委
16、团委id:N00020016	团委名字: 轨道集团团委
17、团委id:N00020017	团委名字: 南昌市卫健委团委
18、团委id:N00020018	团委名字: 江铃集团团委
19、团委id:N00020019	团委名字: 江西银行团委
20、团委id:N00020020	团委名字: 核工业南昌高级技工学校
21、团委id:N00020021	团委名字: 南昌市公安局团委
22、团委id:N00020022	团委名字: 南昌市直机关团工委
23、团委id:N00020023	团委名字: 江西恒信集团团委
24、团委id:N00020024	团委名字: 方大特钢科技股份有限公司团委
25、团委id:N00020025	团委名字: 南华医药团委
26、团委id:N00020026	团委名字: 南昌市非公企业团工委
27、团委id:N00020027	团委名字: 工业控股团委
28、团委id:N00020028	团委名字: 共青团华润万家江西公司委员会
29、团委id:N00020029	团委名字: 南昌移动公司团委
30、团委id:N00020030	团委名字: 南昌水投公司团委
31、团委id:N00020031	团委名字: 南昌市城投团委
32、团委id:N00020032	团委名字: 南昌教育学院团委
33、团委id:N00020035	团委名字: 团市委机关
34、团委id:N00020036	团委名字: 九江银行团委
35、团委id:N00020037	团委名字: 南昌市社会组织
请选择以下第几个团委(输入 1、2、3 等数字):1
{'id': 'N00020001', 'title': '南昌县', 'type': '', 'pid': 'N0002', 'image': None, 'level': '2', 'memberCnt': '16176', 'aid': 'F591A74E-F9E1-48DD-9607-435DF5770DB6', 'account': 'tncxw', 'password': '511614'}
找到以下团委列表:
1、团委id:N000200011002	团委名字: 小蓝经开区银湖管理处团委
2、团委id:N000200011003	团委名字: 蒋巷镇团委
3、团委id:N000200011004	团委名字: 银三角管委会团委
4、团委id:N000200011005	团委名字: 塔城乡团委
5、团委id:N000200011006	团委名字: 塘南镇团委
6、团委id:N000200011007	团委名字: 八一乡团委
7、团委id:N000200011008	团委名字: 武阳镇团委
8、团委id:N000200011010	团委名字: 富山乡团委
9、团委id:N000200011011	团委名字: 三江镇团委
10、团委id:N000200011012	团委名字: 东新乡团委
11、团委id:N000200011013	团委名字: 黄马乡团委
12、团委id:N000200011014	团委名字: 小蓝经开区金湖管理处团委
13、团委id:N000200011015	团委名字: 南昌县莲塘一中团委
14、团委id:N000200011016	团委名字: 冈上镇团委
15、团委id:N000200011017	团委名字: 南昌东方明珠学校
16、团委id:N000200011019	团委名字: 八月湖街道办事处团委
17、团委id:N000200011020	团委名字: 南昌县中等专业学校
18、团委id:N000200011022	团委名字: 诚义学校团委
19、团委id:N000200011023	团委名字: 南昌县向塘实验学校
20、团委id:N000200011024	团委名字: 莲塘实验学校
21、团委id:N000200011025	团委名字: 莲塘第七中学
22、团委id:N000200011026	团委名字: 洪州汇仁学校
23、团委id:N000200011027	团委名字: 向塘镇团委
24、团委id:N000200011029	团委名字: 莲塘第六中学
25、团委id:N000200011031	团委名字: 南昌县银河学校
26、团委id:N000200011032	团委名字: 南昌恒豫学校
27、团委id:N000200011033	团委名字: 莲塘镇团委
28、团委id:N000200011034	团委名字: 洪燕学校
29、团委id:N000200011035	团委名字: 南昌县芳草学校
30、团委id:N000200011036	团委名字: 莲塘第五中学
31、团委id:N000200011037	团委名字: 南昌县新城学校
32、团委id:N000200011038	团委名字: 南昌县洪亿学校
33、团委id:N000200011039	团委名字: 洪亿学校
34、团委id:N000200011040	团委名字: 广福镇团委
35、团委id:N000200011041	团委名字: 广福第一中学团支部
36、团委id:N000200011042	团委名字: 中国共产主义青年团南昌县广福镇委员会
37、团委id:N000200011043	团委名字: 昌南实验学校
38、团委id:N000200011044	团委名字: 南新乡团委
39、团委id:N000200011045	团委名字: 中国共产主义青年团南昌县南新乡委员会
40、团委id:N000200011046	团委名字: 南昌县东新中学团委
41、团委id:N000200011047	团委名字: 莲塘一中实验学校
42、团委id:N000200011048	团委名字: 南昌县莲塘二中
43、团委id:N000200011049	团委名字: 泾口乡团委
44、团委id:N000200011050	团委名字: 南昌县向塘二中团支部
45、团委id:N000200011051	团委名字: 南昌县向阳学校团支部
46、团委id:N000200011052	团委名字: 莲塘四中
47、团委id:N000200011053	团委名字: 私立南昌阳光学校
48、团委id:N000200011054	团委名字: 幽兰镇团委
49、团委id:N000200011055	团委名字: 江西工商技工学校
50、团委id:N000200011056	团委名字: 莲塘二中
51、团委id:N000200011057	团委名字: 莲塘三中
52、团委id:N000200011058	团委名字: 洪州学校
53、团委id:N000200011059	团委名字: 洪范学校
54、团委id:N000200011060	团委名字: 银三角实验学校
55、团委id:N000200011061	团委名字: 凤凰沟实验学校
请选择以下第几个团委(输入 1、2、3 等数字):1
{'id': 'N000200011002', 'title': '小蓝经开区银湖管理处团委', 'type': None, 'pid': 'N00020001', 'image': None, 'level': '3', 'memberCnt': '350', 'aid': '7FF904CB-E6C6-41B1-8475-1EF11B5538AF', 'account': 'zggczyqntncxljkqyhglcwyh_100252', 'password': '565456'}
找到以下团委列表:
1、团委id:N0002000110021001	团委名字: 南昌小蓝经开发区银湖管理处邓埠村团支部
2、团委id:N0002000110021002	团委名字: 南昌小蓝经开发区银湖管理处沥山村团支部
3、团委id:N0002000110021003	团委名字: 南昌小蓝经开发区银湖管理处柏岗村团支部
4、团委id:N0002000110021004	团委名字: 南昌小蓝经开发区银湖管理处玉沙村团支部
5、团委id:N0002000110021005	团委名字: 南昌小蓝经开发区银湖管理处霞山村团支部
6、团委id:N0002000110021006	团委名字: 南昌小蓝经开发区银湖管理处塔田村团支部
7、团委id:N0002000110021007	团委名字: 南昌小蓝经开发区银湖管理处金沙社区团支部
8、团委id:N0002000110021008	团委名字: 南昌小蓝经开发区银湖管理处迎宾社区团支部
请选择以下第几个团委(输入 1、2、3 等数字):1
{'id': 'N0002000110021001', 'title': '南昌小蓝经开发区银湖管理处邓埠村团支部', 'type': None, 'pid': 'N000200011002', 'image': None, 'level': '4', 'memberCnt': '66', 'aid': '77EDAEFA-0D77-4CAA-ABC0-D4AFD9B95B3B', 'account': 'ncsncxncxljjjskfqyhglcdbctzb_100195', 'password': '868432'}
该团委没有下级团委了
您的最终团委id: N0002000110021001    您的团委是第4级
```

**功能比较简单，也可以自定义的去修改代码，有些函数已经封装了，可以单独提出来用**

可自行部署到服务器定时运行！有疑问可以联系我QQ一起交流：**3496632932**

